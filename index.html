<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dojo Nutrition</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body { background:#222; color:#fff; font-family: sans-serif; }
</style>
</head>

<body class="p-6">

<div class="bg-stone-100 text-black max-w-md mx-auto p-6 rounded-xl shadow">

<h1 class="text-3xl font-bold text-center mb-6">Nutrition</h1>

<!-- Search -->
<input id="searchInput" class="w-full border rounded p-3 text-lg"
placeholder="Search ingredient..."
autocomplete="off">

<div id="results" class="bg-white text-black rounded mt-1 hidden"></div>

<!-- Amount -->
<div class="flex gap-3 mt-6">
<input id="amount" type="number" value="100"
class="border rounded p-3 w-1/2" />

<select id="unit" class="border rounded p-3 w-1/2">
<option value="g">grams</option>
<option value="oz">ounces</option>
<option value="cup">cup</option>
</select>
</div>

<!-- Output -->
<div id="nutrition" class="mt-8 text-lg"></div>
</div>

<script>
// ------------------ DEMO DATA (per 100g)
const FOOD = [
{ name:"Salmon", calories:142, protein:19.8, carbs:0, fat:6.3 },
{ name:"Almonds", calories:579, protein:21.2, carbs:21, fat:50 },
{ name:"Banana", calories:89, protein:1, carbs:22, fat:0.3 },
{ name:"Apple", calories:52, protein:0.3, carbs:14, fat:0.2 }
];

// DOM
const input = document.getElementById("searchInput");
const results = document.getElementById("results");
const amount = document.getElementById("amount");
const unit = document.getElementById("unit");
const out = document.getElementById("nutrition");

let sel = null;

// search typing
input.addEventListener("input", () => {
const q = input.value.toLowerCase();
if(!q) return results.classList.add("hidden");

const matches = FOOD.filter(x => x.name.toLowerCase().includes(q));

results.innerHTML = matches.map(x=>`<div class="p-2 hover:bg-gray-200 cursor-pointer">${x.name}</div>`).join("");
results.classList.remove("hidden");

// clicking a result
Array.from(results.children).forEach(div => {
div.onclick = () => selectFood(div.textContent);
});
});

// ENTER selects first visible result
input.addEventListener("keydown", e => {
if(e.key === "Enter"){
const first = results.children[0];
if(first) selectFood(first.textContent);
}
});

function selectFood(n){
sel = FOOD.find(x=>x.name===n);
input.value = n;
results.classList.add("hidden");
render();
}

// convert oz/cup -> g
function toGrams(v,u){
if(u==="g") return v*1;
if(u==="oz") return v*28.35;
if(u==="cup") return v*236;
return v;
}

// compute
function render(){
if(!sel)return;
const g = toGrams(Number(amount.value), unit.value);
const f = (n)=> (sel[n] * g /100).toFixed(1);

out.innerHTML = `
<div class="bg-white text-black p-4 rounded">
<p><b>${sel.name}</b></p>
<p>Calories: ${f('calories')}</p>
<p>Protein: ${f('protein')} g</p>
<p>Carbs: ${f('carbs')} g</p>
<p>Fat: ${f('fat')} g</p>
</div>`;
}

// update on change
amount.oninput = render;
unit.onchange = render;
</script>

</body>
</html>
